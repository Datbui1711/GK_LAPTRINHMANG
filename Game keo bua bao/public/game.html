<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Game Room - K√©o B√∫a Bao</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/game.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=Poppins:wght@400;500;600;700;800;900&family=Space+Grotesk:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="game-container">
        <!-- Animated Background -->
        <div class="animated-bg">
            <div class="circle circle-1"></div>
            <div class="circle circle-2"></div>
            <div class="circle circle-3"></div>
            <div class="circle circle-4"></div>
        </div>

        <!-- Header -->
        <header class="game-header">
            <div class="header-left">
                <button class="back-btn" id="backBtn">
                    <span>‚Üê</span> V·ªÅ trang ch·ªß
                </button>
                <div class="room-info">
                    <span class="room-label">Ph√≤ng:</span>
                    <span class="room-code" id="roomCodeDisplay"></span>
                    <button class="copy-room-btn" id="copyRoomBtn" title="Sao ch√©p m√£ ph√≤ng">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                            <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                        </svg>
                    </button>
                </div>
            </div>
            <div class="header-right">
                <div class="connection-status" id="connectionStatus">
                    <div class="status-dot"></div>
                    <span class="status-text">ƒêang k·∫øt n·ªëi...</span>
                </div>
            </div>
        </header>

        <!-- Chat Toggle Button - Bottom Left Corner -->
        <button class="chat-toggle-btn-fixed" id="chatToggleBtn">
            <span class="chat-icon">üí¨</span>
            <span class="chat-badge" id="chatBadge" style="display: none;">0</span>
        </button>

        <!-- Game Board -->
        <main class="game-board">
            <!-- Players Section -->
            <div class="players-section">
                <div class="player-card player-1" id="player1Card">
                    <div class="player-avatar">
                        <div class="avatar-circle">
                            <span class="avatar-text">üë§</span>
                        </div>
                        <div class="player-status" id="player1Status"></div>
                    </div>
                    <div class="player-info">
                        <h3 class="player-name" id="player1Name">Ch·ªù ng∆∞·ªùi ch∆°i...</h3>
                        <div class="player-score">
                            <span class="score-label">ƒêi·ªÉm:</span>
                            <span class="score-value" id="player1Score">0</span>
                        </div>
                    </div>
                    <div class="player-choice" id="player1Choice">
                        <div class="choice-icon"></div>
                    </div>
                </div>

                <div class="vs-divider">
                    <span>VS</span>
                </div>

                <div class="player-card player-2" id="player2Card">
                    <div class="player-avatar">
                        <div class="avatar-circle">
                            <span class="avatar-text">üë§</span>
                        </div>
                        <div class="player-status" id="player2Status"></div>
                    </div>
                    <div class="player-info">
                        <h3 class="player-name" id="player2Name">Ch·ªù ng∆∞·ªùi ch∆°i...</h3>
                        <div class="player-score">
                            <span class="score-label">ƒêi·ªÉm:</span>
                            <span class="score-value" id="player2Score">0</span>
                        </div>
                    </div>
                    <div class="player-choice" id="player2Choice">
                        <div class="choice-icon"></div>
                    </div>
                </div>
            </div>

            <!-- Round Info -->
            <div class="round-info" id="roundInfo">
                <div class="round-card">
                    <span class="round-label">V√≤ng</span>
                    <span class="round-number" id="currentRound">0</span>
                    <span class="round-separator">/</span>
                    <span class="round-total" id="maxRounds">3</span>
                </div>
            </div>

            <!-- Game Controls -->
            <div class="game-controls" id="gameControls">
                <div class="control-section" id="startSection">
                    <button class="start-game-btn" id="startGameBtn">
                        <span class="btn-icon">üöÄ</span>
                        <span class="btn-text">B·∫Øt ƒë·∫ßu tr·∫≠n ƒë·∫•u</span>
                    </button>
                    <p class="waiting-text" id="waitingText">ƒêang ch·ªù ng∆∞·ªùi ch∆°i th·ª© 2...</p>
                </div>

                <div class="control-section" id="choiceSection" style="display: none;">
                    <p class="choice-prompt">Ch·ªçn l·ª±a ch·ªçn c·ªßa b·∫°n:</p>
                    <div class="choice-buttons">
                        <button class="choice-btn" data-choice="rock" id="rockBtn">
                            <div class="choice-icon-large">‚úä</div>
                            <span class="choice-name">B√∫a</span>
                        </button>
                        <button class="choice-btn" data-choice="paper" id="paperBtn">
                            <div class="choice-icon-large">‚úã</div>
                            <span class="choice-name">Bao</span>
                        </button>
                        <button class="choice-btn" data-choice="scissors" id="scissorsBtn">
                            <div class="choice-icon-large">‚úåÔ∏è</div>
                            <span class="choice-name">K√©o</span>
                        </button>
                    </div>
                    <p class="waiting-choice" id="waitingChoice" style="display: none;">
                        ƒêang ch·ªù ƒë·ªëi th·ªß ch·ªçn...
                    </p>
                </div>

                <div class="control-section" id="resultSection" style="display: none;">
                    <div class="result-card" id="resultCard">
                        <div class="result-icon" id="resultIcon"></div>
                        <h3 class="result-title" id="resultTitle"></h3>
                        <p class="result-message" id="resultMessage"></p>
                        <button class="rematch-btn" id="rematchBtn" style="display: none;">
                            <span class="btn-icon">üîÑ</span>
                            <span class="btn-text">Ch∆°i l·∫°i</span>
                        </button>
                    </div>
                </div>
            </div>
        </main>

        <!-- Chat Panel - Left Side -->
        <aside class="chat-panel chat-panel-left" id="chatPanel">
            <div class="chat-header">
                <h3>üí¨ Chat Real-time</h3>
                <button class="close-chat-btn" id="closeChatBtn">√ó</button>
            </div>
            <div class="chat-messages" id="chatMessages">
                <div class="chat-welcome">
                    <p>B·∫Øt ƒë·∫ßu tr√≤ chuy·ªán v·ªõi ƒë·ªëi th·ªß c·ªßa b·∫°n!</p>
                </div>
            </div>
            <div class="chat-input-container">
                <input 
                    type="text" 
                    id="chatInput" 
                    placeholder="Nh·∫≠p tin nh·∫Øn..."
                    maxlength="200"
                    autocomplete="off"
                >
                <button class="send-btn" id="sendBtn">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="22" y1="2" x2="11" y2="13"></line>
                        <polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>
                    </svg>
                </button>
            </div>
        </aside>

        <!-- Toast Notifications -->
        <div class="toast-container" id="toastContainer"></div>
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script src="js/socket.js"></script>
    <script src="js/audio.js"></script>
    <script src="js/game.js"></script>
</body>
</html>

